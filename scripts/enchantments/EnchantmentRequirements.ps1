$skillLevels = @{
    0 = 0
    1 = 38
    2 = 77
    3 = 115
    4 = 154
    5 = 192
    6 = 231
    7 = 269
    8 = 308
    9 = 346
    10 = 385
    11 = 423
    12 = 462
    13 = 500
}

$enchantMap = @{
    "sanctified" = @{
        MaxLevel = 12
        Skill ="combat"
        StartingLevel = 0
    }
    "respiration" = @{
        MaxLevel = 7
        Skill ="swimming"
        StartingLevel = 0
    }
    "wind_burst" = @{
        MaxLevel = 8
        Skill ="magic"
        StartingLevel = 0
    }
    "chill_aura" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "aqua_affinity" = @{
        MaxLevel = 1
        Skill ="swimming"
        StartingLevel = 0
    }
    "magic_siphon" = @{
        MaxLevel = 13
        Skill ="magic"
        StartingLevel = 0
    }
    "curse_of_bones" = @{
        MaxLevel = 13
        Skill ="endurance"
        StartingLevel = 0
    }
    "renewal" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "mana_regen" = @{
        MaxLevel = 7
        Skill ="magic"
        StartingLevel = 0
    }
    "binding_curse" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "flame" = @{
        MaxLevel = 1
        Skill ="archery"
        StartingLevel = 0
    }
    "incurable_wounds" = @{
        MaxLevel = 13
        Skill ="archery"
        StartingLevel = 0
    }
    "mana_boost" = @{
        MaxLevel = 7
        Skill ="magic"
        StartingLevel = 0
    }
    "rebounding" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "mirror_shield" = @{
        MaxLevel = 7
        Skill ="combat"
        StartingLevel = 0
    }
    "worker_exploitation" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "luck_of_the_sea" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "soul_speed" = @{
        MaxLevel = 7
        Skill ="agility"
        StartingLevel = 0
    }
    "silk_touch" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "power" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "catalysis" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "blast_protection" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "depth_strider" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "density" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "piercing" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "soulbound" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "purification" = @{
        MaxLevel = 4
        Skill ="magic"
        StartingLevel = 0
    }
    "fire_protection" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "thorns" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "quick_charge" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "berserkers_fury" = @{
        MaxLevel = 2
        Skill = ""
        StartingLevel = 0
    }
    "soul_looting" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "neurotoxins" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "punch" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "miners_fervor" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "poisoning" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "spectral_bite" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "infinity" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "fearless" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "ensnaring" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "feather_falling" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "poison_tip" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "projectile_protection" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "impaling" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "ruthless_strike" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "protection" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "vengeance" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "implosion" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "chainsaw" = @{
        MaxLevel = 1
        Skill ="woodcutting"
        StartingLevel = 0
    }
    "lure" = @{
        MaxLevel = 8
        Skill ="fishing"
        StartingLevel = 0
    }
    "knowledge_of_the_ages" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "unusing" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "smite" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "comb_cutter" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "sculk_smite" = @{
        MaxLevel = 10
        Skill ="combat"
        StartingLevel = 0
    }
    "frost_walker" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "voltaic_shot" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "life_mending" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "riptide" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "raider_damage_enchant" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "breach" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "backstabbing" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "bane_of_arthropods" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "sharpness" = @{
        MaxLevel = 9
        Skill ="combat"
        StartingLevel = 0
    }
    "swift_sneak" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "quarry_pickaxe" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "channeling" = @{
        MaxLevel = 1
        Skill ="magic"
        StartingLevel = 0
    }
    "soul_siphoner" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "crescendo_of_bolts" = @{
        MaxLevel = 5
        Skill ="archery"
        StartingLevel = 0
    }
    "growth_serum" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "infusion" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "smack" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "icy_thorns" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "severing" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "efficiency" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "wrecking" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "natures_blessing" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "reactive" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "life_stealing" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "capturing" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "endless_quiver" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "mending" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "ricochet" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "chromatic" = @{
        MaxLevel = 1
        Skill ="farming"
        StartingLevel = 0
    }
    "blessing" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "scavenger" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "shield_bash" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "lolths_curse" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "frostbite" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "boon_of_the_earth" = @{
        MaxLevel = 4
        Skill ="mining"
        StartingLevel = 0
    }
    "soul_snatcher" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "reflective_defenses" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "self_sling" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "decrepitude" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "spectral_conjurer" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "destruction" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "fire_react" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "multishot" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "tempting" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "fire_aspect" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "unbreaking" = @{
        MaxLevel = 8
        Skill ="smithing"
        StartingLevel = 0
    }
    "fortune" = @{
        MaxLevel = 8
        Skill ="magic"
        StartingLevel = 0
    }
    "longevity" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "plague_bringer" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "stasis" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "breaking" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "sweeping_edge" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "vanishing_curse" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "loyalty" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "stable_footing" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "potent_poison" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "mystical_enlightenment" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "looting" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "knockback" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
    "discharge" = @{
        MaxLevel = 1
        Skill = ""
        StartingLevel = 0
    }
}

$basePath = "E:\Projects\Minecraft\atm10_pmmo\atm_10_pack\src\main\resources\data"

Get-ChildItem -Path $basePath -Directory | ForEach-Object {
    $enchantmentsPath = Join-Path -Path $_.FullName -ChildPath "pmmo\enchantments"

    if (Test-Path -Path $enchantmentsPath) {
        Get-ChildItem -Path $enchantmentsPath -Filter "*.json" | ForEach-Object {
            $enchantmentFile = $_.FullName
            $enchantmentName = $_.BaseName

            # Determine the tier for the enchantment
            $enchant = $enchantMap[$enchantmentName]

            # Generate the levels array
            $levels = @()
            for ($i = $enchant.MaxLevel; $i -le $enchant.MaxLevel; $i++) {
                if ($i -eq 0 -and $enchant.StartingLevel -eq 0) {
                    $levels += @{}
                } else {
                    $cost = $skillLevels[$enchant.StartingLevel + $i]

                    if ($enchant.Skill -eq "") {
                        $levels += @{ "enchanting" = $cost }
                    } else {
                        $levels += @{ "enchanting" = $cost; $enchant.Skill = $cost }
                    }
                }
            }

            # Create the JSON content
            $jsonContent = @{
                "override" = $true
                "levels"   = $levels
            } | ConvertTo-Json -Depth 3

            # Write the JSON content to the file
            Set-Content -Path $enchantmentFile -Value $jsonContent
        }
    }
}
